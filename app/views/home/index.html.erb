<% require 'uri' %>

<h4> Welcome to Twitter!!! </h4>

<div class="home_left_section">
  <form method="post" action="/tweets">
    <textarea name="tweet" rows="5" cols="50" placeholder="Tweet as test user(under construction)" required></textarea>
    <input type="text" name="photo_url" placeholder="Picture Location" size="80">
    <input type="submit" value="Tweet">
  </form>
</div>


<div class="home_right_section">
  <form method="get" action="/user/new">
    <p align ="center">New to Twitter?</p>
    <p align ="center">Sign up now to get your own personalized timeline!</p>
    <br><br>
    <p align ="center"><button type="submit" class="btn btn-default">Sign up</button></p>
  </form>  
</div>


<table class='table table-striped'>
  <% @tweet.each do |tweet| %>
      <th width="5%">
      <% if  tweet.user.photo_url != nil &&  tweet.user.photo_url  =~ URI::regexp %>
        <%= link_to image_tag(tweet.user.photo_url, height: '40px'), "" %>
      <% end %>  
      <%=tweet.user.name%>
      @<%=tweet.user.user_name%>
      <%=tweet.create_time%>
      </th>
    </tr>
  <tbody>
      <tr>
        <td span="2">
         <% if  tweet.photo_url != nil && tweet.photo_url  =~ URI::regexp %>
          <%= link_to image_tag(tweet.photo_url, height: '200px'), "" %>
        <% end %>  
        </td>
        <td span="3"><%= tweet.content %></td>
      </tr>
  </tbody>
  <% end %>
</table>
